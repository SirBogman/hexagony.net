$buttonInnerWidth: 1.5rem;
$buttonOuterWidth: 2.75rem;
$narrowButtonOuterWidth: 2.35rem;
// The slider counts as two buttons.
$buttonCount: 17;
$narrowWidthPadding: 0.5;

body header {
    background: var(--color);
    position: sticky;
    top: 0;
    z-index: 1;
}

body > header nav {
    margin: auto;
    max-width: 1280px;
    display: grid;
    grid-template-columns: auto 1fr auto 1fr auto 1fr auto;
    grid-template-rows: auto;
    grid-template-areas:
        "navigation spacer1 viewControls spacer2 editControls spacer3 playControls";
}

// Use two-row toolbar for small widths.
// window.innerWidth values:
// Portrait:
// iPhone 8: 375
// iPhone 12: 390
// iPhone 12 Pro: 390
// iPhone 12 Pro Max: 428
// Landscape:
// iPhone 8: 667
// iPhone 12: 750
// iPhone 12 Pro: 750
// iPhone 12 Pro Max: 832
@media (max-width: ($buttonCount + $narrowWidthPadding) * $narrowButtonOuterWidth) {
    body > header nav {
        grid-template-columns: auto 1fr auto;
        grid-template-rows: auto auto;
        grid-template-areas:
        "navigation spacer1 editControls"
        "viewControls spacer1 playControls";
    }
}

nav > #navigation {
    grid-area: navigation;
}

nav > #viewControls {
    grid-area: viewControls;
}

nav > #editControls {
    grid-area: editControls;
}

nav > #playControls {
    grid-area: playControls;
}

body > header svg {
    height: $buttonInnerWidth;
    width: $buttonInnerWidth;
}

body > header a,
body > header > nav button,
#speedSliderContainer {
    height: $buttonOuterWidth;
    width: $buttonOuterWidth;
    display: inline-block;
    align-items: center;
    display: flex;
    justify-content: center;
    color: var(--background);
    fill: var(--background);
}

body > header > nav .group {
    display: flex;
}

body > header > nav button {
    background: var(--color);
    color: var(--background);
    border: none;
    padding: 0;
}

body > header a:hover,
body > header a:not([href]),
body > header > nav button[aria-checked="true"],
body > header > nav button:enabled:hover {
    background: var(--background);
    color: var(--color);
}

body > header > nav button:disabled {
    color: var(--disabled-color);
}

#speedSliderContainer.focused {
    border: 1px dotted var(--background);
}

#speedSliderContainer {
    width: 130px;
}

.slider {
    -webkit-appearance: none;
    width: 100px;
    opacity: 0.8;
    transition: opacity .2s;
    height: 1px;
    // don't put a weird outline on it when using it in Chrome.
    outline: none;
}

.slider:hover,
.slider:focus {
    opacity: 1.0;
}

.slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    background: var(--background);
    width: 10px;
    height: 1.5rem;
}

.slider::-moz-range-thumb {
    width: 10px;
    height: 1.5rem;
    background: var(--background);
    border-radius: 0;
    border: none;
}

@media (max-width: 850px) {
    // Reduce the outer width of buttons a bit, before changing to the one column layout.
    $buttonOuterWidth: $narrowButtonOuterWidth;

    body > header a,
    body > header > nav button {
        width: $buttonOuterWidth;
    }

    #speedSliderContainer {
        width: $buttonOuterWidth * 2;
    }

    .slider {
        width: $buttonOuterWidth + $buttonInnerWidth;
    }
}
